# 네트워크의 기본 구조

네트워크는 `노드(Node)`와 `간선(Edge)`으로 이루어진 그래프 구조로 이해할 수 있습니다.

- 노드: 네트워크 기기(예: 컴퓨터, 스마트폰, 서버 등)
- 간선: 네트워크 기기 간에 정보를 주고받는 유,무선 통신 매체

노드 간 연결 구조를 `네트워크 토폴로지(Topology)`라고 하며, 연결 방식에 따라 망형, 트리형, 링형 등으로 구분됩니다.

![image](https://github.com/user-attachments/assets/2a7eba14-a97b-4951-8459-03eba6696bdd)


### 호스트와 중간 노드

- `호스트`: 네트워크의 가장자리에 위치하며, 정보를 최초 송신하거나 최종 수신하는 장치
    - 대부분의 네트워크 기기
    - 클라이언트: 요청을 보내는 호스트
    - 서버: 응답을 보내는 호스트
- `중간 노드`: 호스트 간 정보를 안정적으로 전달하는 장치
    - 예: 스위치, 라우터, 공유기

## LAN과 WAN

네트워크는 규모에 따라 다음 두 가지로 나뉩니다.

**LAN (Local Area Network)**

- 한정된 지역(집, 사무실 등)에서 가까운 거리의 기기들을 연결
- 예: 집에서 공유기를 통해 스마트폰, 노트북 등을 연결한 경우

**WAN (Wide Area Network)**

- 지리적으로 떨어진 LAN들을 연결하는 광범위한 네트워크
- 예: 인터넷
- `ISP(Internet Service Provider)`가 구축하고 관리 (KT, SK브로드밴드 등)

## 패킷 교환 네트워크

네트워크에서는 큰 데이터를 한 번에 전송하지 않고, 작은 단위로 쪼개서 전송합니다. 이 단위를 `패킷(Packet)`이라고 합니다.

- 패킷 구조:
    - `페이로드`: 전송하려는 실제 데이터
    - `헤더/Header`: 송수신 주소, 전송 방식 등 부가 정보
    - `트레일러/Trailer`: 오류 검사 정보 등 (선택적)

이러한 방식을 사용하는 네트워크를 패킷 교환 네트워크라고 합니다.

## 주소의 개념과 전송 방식

패킷에는 주소가 포함되어 있어 목적지를 명확히 할 수 있습니다.

- `IP 주소`, `MAC 주소`가 대표적
- 주소 기반 전송 방식:
    - `유니캐스트`: 특정 호스트에게만 전송 (1:1)
    - `브로드캐스트`: 네트워크의 모든 호스트에게 전송 (1:N)
    - `멀티캐스트`: 네트워크 내의 동일 그룹의 호스트에게만 전송 (1:선택된 N)
    - `애니캐스트`: 동일 그룹 중 가장 가까운 호스트에게 전송 (1:1 지능형)

브로드캐스트의 도달 범위를 `브로드캐스트 도메인`이라 하며, 동일 도메인에 있는 호스트는 같은 LAN에 속한다고 간주합니다.

# 두 호스트가 패킷을 주고받는 과정

## 프로토콜

- `프로토콜(Protocol)`은 네트워크 상에서 통신 규칙을 정의한 표준입니다. 동일한 프로토콜을 이해해야 서로 간 통신이 가능합니다.
- `IP`: 네트워크 간 주소 지정
- `ARP`: IP와 MAC 주소 매핑
- `TCP`: 신뢰성 높은 전송 보장
- `UDP`: 빠르지만 신뢰성은 낮음
- `HTTP/HTTPS`: 웹 통신(HTTPS는 보안 추가)

각 프로토콜의 목적과 특징에 따라 패킷 구조와 헤더 정보도 달라집니다

![image](https://github.com/user-attachments/assets/30f1071e-1220-4ced-adc8-d72dba4e20f2)


## 네트워크 참조 모델

패킷을 주고받는 과정에도 정형화된 순서가 있고, 계층적으로 표현할 수 있습니다. 네트워크 참조 모델이란 통신이 이루어지는 단계를 계층적으로 표현한 모델입니다.

패킷을 송신하는 쪽에서는 상위 계층에서 하위 계층으로 정보를 보내고 , 패킷을 수신하는 쪽에서는 하위 계층에서 상위 계층으로 정보를 받아들입니다.

![image](https://github.com/user-attachments/assets/a490e441-59f0-47fe-8f88-8183400ee68b)


### OSI 모델

![image](https://github.com/user-attachments/assets/a495b1d2-8e24-4aa9-adea-112c49dacaf8)


국제 표준화 기구 ISO에서 만든 네트워크 참조 모델로, 통신 단계를 7개의 계층으로 나눈 것을 OSI 7계층이라 한다.

**물리 계층**

- 가장 최하위 계층으로, 비트 신호를 주고받는 계층이다.
- 유무선 통신 매체를 통해 이 신호를 물리적으로 운반한다.

**데이터 링크 계층**

- 같은 LAN에 속한 호스트끼리 올바르게 정보를 주고받기 위한 계층이다.
- 같은 네트워크에 속한 호스트를 `식별할 수 있는 주소(MAC 주소)`를 사용하며, 물리 계층을 통해 주고받는 정보에 오류가 없는지 확인하기도 한다.
- 하드웨어와 밀접하게 맞닿아 있는 계층이다

**네트워크 계층**

- 네트워크 간 통신을 가능하게 하는 계층이다.
- LAN을 넘어 다른 네트워크와 통신을 주고받기 위해 필요하며, 이때 `호스트를 식별할 수 있는 주소(IP 주소)`가 필요하다.
- 대표적으로 사용되는 프로토콜은 IP이다.

**전송 계층**

- 네트워크를 통해 송수신되는 패킷은 전송 도중에 유실되거나 순서가 바뀔 수 있다.
- 이러한 상황에서도 신뢰성 있는 전송을 가능하게 하는 계층이다.
- 포트라는 정보를 통해 특정 응용 프로그램과의 연결 다리 역할을 수행한다.
- 대표적인 프로토콜로는 TCP와 UDP가 있다.

**세션 계층**

- 응용 프로그램 간의 연결 상태, 즉 세션을 관리하기 위한 계층이다.
- 세션을 생성, 유지, 끊는 역할을 수행한다.

**표현 계층**

- 인코딩, 압축, 암호화와 같은 작업을 수행하는 계층이다.
- 세션 계층과 표현 계층은 다른 계층과 달리, 명확하게 구분하지 않거나 응용 계층에 포함하여 간주하는 경우가 많다.

**응용 계층**

- 사용자에게 여러 네트워크 서비스를 제공하는 계층이다.
- HTTP, HTTPS, DNS 등의 프로토콜이 여기에 속한다.

### TCP/IP 모델

![image](https://github.com/user-attachments/assets/98c7a59f-c2b4-4331-a762-d3e41aea0426)


- TCP/IP 모델은 4계층 구조로,네트워크 액세스 계층, 인터넷 계층, 전송 계층, 응용 계층으로 구성된다.
- OSI 모델은 주로 네트워크의 이론적 구조 설명에 목적이 있으며, TCP/IP 모델은 구현과 실제 프로토콜에 중점을 둔다.

**네트워크 계층**

- 링크 계층, 또는 네트워크 인터페이스 계층이라고도 부른다.
- 데이터 링크 계층과 유사하며, OSI 모델에서의 물리 계층에 해당하는 개념이 없다고 보는 견해도 존재한다.

**인터넷 계층**

- OSI 모델의 네트워크 계층과 유사한 역할을 한다.

**전송 계층**

- OSI 모델의 전송 계층과 유사한 기능을 수행한다.

**응용 계층**

- OSI 모델의 세션 계층, 표현 계층, 응용 계층을 합친 것과 유사하다.

## 캡슐화와 역캡슐화

- 송신 과정에서는 캡슐화, 수신 과정에서는 역캡슐화가 이루어진다.

각 계층에서는 정보를 송신할 때 상위 계층으로부터 받은 데이터를 페이로드로 사용하고, 자신의 프로토콜 목적과 특징에 맞는 헤더(또는 트레일러)를 추가한 뒤 하위 계층으로 전달한다.

- 이때 상위 계층의 데이터는 하위 계층의 페이로드로 간주된다.
- 캡슐화: 송신 측에서 헤더 및 트레일러를 추가해 나가는 과정
- 역캡슐화: 수신 측에서 각 계층에서 붙여진 헤더 및 트레일러를 확인하고 제거하는 과정
    
    ![image](https://github.com/user-attachments/assets/07a8d9f0-dee5-45ab-8547-a49e8998e961)

    

## 계층별 메시지 명칭

각 계층에서 주고받는 데이터 단위는 계층마다 명칭이 다르다.

- OSI 모델 기준으로,
    - 응용, 표현, 세션 계층: 데이터(Data)
    - 전송 계층: 세그먼트(Segment)
    - 네트워크 계층: 패킷(Packet)
    - 데이터 링크 계층: 프레임(Frame)
    - 물리 계층: 비트(Bit)

![image](https://github.com/user-attachments/assets/3bb20729-3a74-4112-adbb-b7014d29e9fa)
